<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lawfirm.lawfirmserver.user.dao.CustomerServiceInfoDao">


    <select id="selectByUserId" parameterType="java.lang.Long" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from customerServiceInfo
        where userId = #{userId,jdbcType=BIGINT}
        and isValidFlag = '1'
    </select>

    <select id="selectByClientInfo" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from customerServiceInfo
        where clientId = #{clientId,jdbcType=BIGINT}
        and clientType = #{clientType,jdbcType=VARCHAR}
        and isValidFlag = '1'
    </select>


    <insert id="insertSelectiveAndBackId" parameterType="com.lawfirm.lawfirmserver.user.po.CustomerServiceInfo"
            useGeneratedKeys="true" keyProperty="id">
        insert into customerServiceInfo
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="userId != null">
                userId,
            </if>
            <if test="clientId != null">
                clientId,
            </if>
            <if test="clientType != null">
                clientType,
            </if>
            <if test="remainingServiceCount != null">
                remainingServiceCount,
            </if>
            <if test="remainingServiceMinutes != null">
                remainingServiceMinutes,
            </if>
            <if test="serviceLevel != null">
                serviceLevel,
            </if>
            <if test="maxEmployeeCount != null">
                maxEmployeeCount,
            </if>
            <if test="serviceStartTime != null">
                serviceStartTime,
            </if>
            <if test="serviceExpireTime != null">
                serviceExpireTime,
            </if>
            <if test="updateTime != null">
                updateTime,
            </if>
            <if test="isValidFlag != null">
                isValidFlag,
            </if>
            <if test="createTime != null">
                createTime,
            </if>
            operateTimeForHis,
        </trim>
        values
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id},
            </if>
            <if test="userId != null">
                #{userId},
            </if>
            <if test="clientId != null">
                #{clientId},
            </if>
            <if test="clientType != null">
                #{clientType},
            </if>
            <if test="remainingServiceCount != null">
                #{remainingServiceCount},
            </if>
            <if test="remainingServiceMinutes != null">
                #{remainingServiceMinutes},
            </if>
            <if test="serviceLevel != null">
                #{serviceLevel},
            </if>
            <if test="maxEmployeeCount != null">
                #{maxEmployeeCount},
            </if>
            <if test="serviceStartTime != null">
                #{serviceStartTime},
            </if>
            <if test="serviceExpireTime != null">
                #{serviceExpireTime},
            </if>
            <if test="updateTime != null">
                #{updateTime},
            </if>
            <if test="isValidFlag != null">
                #{isValidFlag},
            </if>
            <if test="createTime != null">
                #{createTime},
            </if>
            now(),
        </trim>
    </insert>

    <update id="updateByUserId" parameterType="com.lawfirm.lawfirmserver.user.po.CustomerServiceInfo">
        update customerServiceInfo
        <set>
            <if test="userId != null">
                userId=#{userId},
            </if>
            <if test="clientId != null">
                clientId=#{clientId},
            </if>
            <if test="clientType != null">
                clientType=#{clientType},
            </if>
            <if test="remainingServiceCount != null">
                remainingServiceCount=#{remainingServiceCount},
            </if>
            <if test="remainingServiceMinutes != null">
                remainingServiceMinutes=#{remainingServiceMinutes},
            </if>
            <if test="serviceLevel != null">
                serviceLevel=#{serviceLevel},
            </if>
            <if test="maxEmployeeCount != null">
                maxEmployeeCount=#{maxEmployeeCount},
            </if>
            <if test="serviceStartTime != null">
                serviceStartTime=#{serviceStartTime},
            </if>
            <if test="serviceExpireTime != null">
                serviceExpireTime=#{serviceExpireTime},
            </if>
            <if test="updateTime != null">
                updateTime=#{updateTime},
            </if>
            <if test="isValidFlag != null">
                isValidFlag=#{isValidFlag},
            </if>
            <if test="createTime != null">
                createTime=#{createTime},
            </if>
            operateTimeForHis=now(),
        </set>
        where userId = #{userId,jdbcType=BIGINT}
    </update>

</mapper>
